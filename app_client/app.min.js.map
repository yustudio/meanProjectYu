{"version":3,"sources":["app.min.js"],"names":["config","$stateProvider","$urlRouterProvider","state","url","views","header","templateUrl","controller","content","footer","content@","otherwise","angular","module","$scope","console","log","meanData","getProfile","success","data","user","error","err","$location","authentication","firstName","lastName","email","password","dataloading","register","JSON","stringify","path","message","alert","service","$http","$window","saveToken","token","localStorage","getToken","isLoggedIn","payload","split","atob","parse","exp","Date","now","currentUser","name","post","login","logout","removeItem","get","headers","Authorization"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n\r\n\tangular.module('MeanAppYu', ['ui.router']);\r\n\r\n\tfunction config($stateProvider, $urlRouterProvider){\r\n\t\r\n\t$stateProvider\r\n\t\t.state('app',{\r\n\t\t\turl  : '/',\r\n\t\t\tviews:{\r\n\t\t\t\t'header' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content':{\r\n\t\t\t\t\ttemplateUrl : \"home/home.view.html\",\r\n\t\t\t\t\tcontroller  : \"HomeController\"\r\n\t\t\t\t},\r\n\t\t\t\t'footer' :{\r\n\t\t\t\t\ttemplateUrl : \"common/footer/footer.view.html\",\r\n\t\t\t\t\tcontroller  : \"FooterController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\t.state('app.aboutus',{\r\n\t\t\turl  : 'aboutus',\r\n\t\t\tviews:{\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"aboutus/aboutus.view.html\",\r\n\t\t\t\t\tcontroller  : \"AboutUsController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('app.login',{\r\n\t\t\turl  : 'login',\r\n\t\t\tviews:{\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"auth/login/login.view.html\",\r\n\t\t\t\t\tcontroller  : \"LoginController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t.state('app.register',{\r\n\t\t\turl  : 'register',\r\n\t\t\tviews:{\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"auth/register/register.view.html\",\r\n\t\t\t\t\tcontroller  : \"RegisterController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('app.profile',{\r\n\t\t\turl  : 'profile',\r\n\t\t\tviews:{\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"profile/profile.view.html\",\r\n\t\t\t\t\tcontroller  : \"ProfileController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t$urlRouterProvider.otherwise('/');\r\n\t};\r\n\r\n\tangular\r\n    .module('MeanAppYu')\r\n    .config(['$stateProvider', '$urlRouterProvider', config]);\r\n    //.run(['$rootScope', '$location', 'authentication', run]);\r\n\r\n})();\n(function() {\r\n\tangular.module('MeanAppYu')\t\r\n\t\t\t.controller('AboutUsController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running AboutusController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('HomeController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running HomeController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\r\n\t\t\t.controller('ProfileController', ['$scope', 'meanData', function($scope, meanData){\r\n\t\t\t\tconsole.log('Running ProfileController');\r\n\r\n\t\t\t\tmeanData.getProfile()\r\n\t\t\t\t\t.success(function(data) {\r\n\t\t\t\t\t$scope.user = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\n(function (){\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t.controller('RegisterController', ['$scope', '$location', 'authentication', function($scope,$location,authentication){\r\n\t\t\tconsole.log('Running RegisterController');\r\n\r\n\t\t\tvar user={\r\n\t\t\t\tfirstName:\"\",\r\n\t\t\t\tlastName: \"\",\r\n\t\t\t\temail:\"\",\r\n\t\t\t\tpassword:\"\"\r\n\t\t\t};\r\n\r\n\t\t\t$scope.dataloading = false;\r\n\t\t\t$scope.user = user;\r\n\r\n\t\t\t$scope.register=function(){\r\n\t\t\t\tconsole.log(JSON.stringify(user));\r\n\t\t\t\t$scope.dataloading = true;\r\n\t\t\t\tauthentication.register(user)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tconsole.log(\"Registration Successful\");\r\n\t\t\t\t\t\t$location.path('/profile');\r\n\t\t\t\t\t})\r\n\t\t\t\t.error(function(err){\r\n\t\t\t\t\t\tconsole.log(\"Registraion failed: \"+ err.message);\r\n\t\t\t\t\t\talert(\"Registraion failed: \"+ err.message);\r\n\t\t\t\t\t\t$location.path(\"/register\");\r\n\t\t\t\t\t\t$scope.dataloading = false;\r\n\t\t\t\t});\t\t\r\n\t\t\t};\r\n\r\n\t\t}]);\r\n\r\n})();\r\n\r\n\t\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('FooterController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running FooterController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\n\r\n(function (){\r\n\r\n\tangular.module('MeanAppYu')\r\n\t\t\t.controller('LoginController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running LoginController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\t\t\r\n\t\n( function() {\r\nangular.module('MeanAppYu')\t\t\r\n\t\t.service('authentication', ['$http', '$window', '$location', function($http, $window, $location){\r\n\t\t\tconsole.log('Running authentication');\r\n\r\n\t\t\tvar saveToken = function (token) {\r\n\t\t\t\t$window.localStorage['mean-token'] = token;\r\n\t\t\t};\r\n\r\n\t\t\tvar getToken = function () {\r\n\t\t\t\treturn $window.localStorage['mean-token'];\r\n\t\t\t};\r\n\r\n\t\t\tvar isLoggedIn = function() {\r\n\t\t\t\tvar token = getToken();\r\n\t\t\t\tvar payload;\r\n\r\n\t\t\t\tif(token){\r\n\t\t\t\t\tpayload = token.split('.')[1]; // get second part of token\r\n\t\t\t\t\tpayload = $window.atob(payload);  // decode a base64 string\r\n\t\t\t\t\tpayload = JSON.parse(payload); // parse it as JSON\r\n\r\n\t\t\t\t\treturn payload.exp > Date.now() / 1000;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar currentUser = function() {\r\n\t\t\t\tif(isLoggedIn()){\r\n\t\t\t\t\tvar token = getToken();\r\n\t\t\t\t\tvar payload = token.split('.')[1];\r\n\t\t\t\t\tpayload = $window.atob(payload);\r\n\t\t\t\t\tpayload = JSON.parse(payload);\r\n\t\t\t\treturn {\r\n\t\t\t\t\temail : payload.email,\r\n\t\t\t\t\tname : payload.name\r\n\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tregister = function(user) {\r\n\t\t\t\tconsole.log(\"-------------Inside auth.service\")\r\n\t\t\t\treturn $http.post('/api/register', user).success(function(data){\r\n\t\t\t\tsaveToken(data.token);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogin = function(user) {\r\n\t\t\t\treturn $http.post('/api/login', user).success(function(data) {\r\n\t\t\t\tsaveToken(data.token);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogout = function() {\r\n\t\t\t\t$window.localStorage.removeItem('mean-token');\t\t\t\r\n\t\t\t}; \r\n\r\n\t\t\treturn {\r\n\t\t\t\tcurrentUser : currentUser,\r\n\t\t\t\tsaveToken : saveToken,\r\n\t\t\t\tgetToken : getToken,\r\n\t\t\t\tisLoggedIn : isLoggedIn,\r\n\t\t\t\tregister : register,\r\n\t\t\t\tlogin : login,\r\n\t\t\t\tlogout : logout\r\n\t\t\t};\r\n\r\n\t\r\n\r\n\t\t}]);\r\n\r\n})();\n(function() {\r\n\r\n  angular\r\n    .module('MeanAppYu')\r\n    .service('meanData', ['$http', 'authentication', function($http, authentication) {\r\n\r\n\t    // pass token to API /api/profile, server expects JWT in the header \r\n\t    // on the request called Authorization\r\n\t    var getProfile = function () {\r\n\t      return $http.get('/api/profile', {\r\n\t        // Bearer is http token based strategy\r\n\t        headers: {\r\n\t          Authorization: 'Bearer '+ authentication.getToken()\r\n\t        }\r\n\t      });\r\n\t    };\r\n\r\n\t    return {\r\n\t      getProfile : getProfile\r\n\t  \t};\r\n    }]);\r\n})();\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('HeaderController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running HeaderController');\r\n\t\t\t}]);\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}