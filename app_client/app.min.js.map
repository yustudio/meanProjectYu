{"version":3,"sources":["app.min.js"],"names":["config","$stateProvider","$urlRouterProvider","state","url","views","header@","templateUrl","controller","content@","footer","otherwise","angular","module","$scope","console","log","meanData","getProfile","success","data","user","error","err","$location","authentication","firstName","lastName","email","password","dataloading","register","JSON","stringify","path","message","alert","$state","isLoggedIn","currentUser","logout","is","reload","profile","login","service","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","parse","exp","Date","now","name","post","removeItem","get","headers","Authorization"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n\r\n\tangular.module('MeanAppYu', ['ui.router']);\r\n\r\n\tfunction config($stateProvider, $urlRouterProvider){\r\n\t\r\n\t$stateProvider\r\n\t\t.state('app',{\r\n\t\t\turl  : '/',\r\n\t\t\tviews:{\r\n\t\t\t\t'header@' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"home/home.view.html\",\r\n\t\t\t\t\tcontroller  : \"HomeController\"\r\n\t\t\t\t},\r\n\t\t\t\t'footer' :{\r\n\t\t\t\t\ttemplateUrl : \"common/footer/footer.view.html\",\r\n\t\t\t\t\tcontroller  : \"FooterController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\t.state('app.aboutus',{\r\n\t\t\turl  : 'aboutus',\r\n\t\t\tviews:{\r\n\t\t\t\t'header@' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"aboutus/aboutus.view.html\",\r\n\t\t\t\t\tcontroller  : \"AboutUsController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('app.login',{\r\n\t\t\turl  : 'login',\r\n\t\t\tviews:{\r\n\t\t\t\t'header@' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"auth/login/login.view.html\",\r\n\t\t\t\t\tcontroller  : \"LoginController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t.state('app.register',{\r\n\t\t\turl  : 'register',\r\n\t\t\tviews:{\r\n\t\t\t\t'header@' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"auth/register/register.view.html\",\r\n\t\t\t\t\tcontroller  : \"RegisterController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('app.profile',{\r\n\t\t\turl  : 'profile',\r\n\t\t\tviews:{\r\n\t\t\t\t'header@' : {\r\n\t\t\t\t\ttemplateUrl : 'common/header/header.view.html',\r\n\t\t\t\t\tcontroller  : \"HeaderController\"\r\n\t\t\t\t},\r\n\t\t\t\t'content@':{\r\n\t\t\t\t\ttemplateUrl : \"profile/profile.view.html\",\r\n\t\t\t\t\tcontroller  : \"ProfileController\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t$urlRouterProvider.otherwise('/');\r\n\t};\r\n\r\n\tangular\r\n    .module('MeanAppYu')\r\n    .config(['$stateProvider', '$urlRouterProvider', config]);\r\n    //.run(['$rootScope', '$location', 'authentication', run]);\r\n\r\n})();\n(function() {\r\n\tangular.module('MeanAppYu')\t\r\n\t\t\t.controller('AboutUsController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running AboutusController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('HomeController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running HomeController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\r\n\t\t\t.controller('ProfileController', ['$scope', 'meanData', function($scope, meanData){\r\n\t\t\t\tconsole.log('Running ProfileController');\r\n\r\n\t\t\t\tmeanData.getProfile()\r\n\t\t\t\t\t.success(function(data) {\r\n\t\t\t\t\t$scope.user = data;\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t})\r\n\t\t\t\t.error(function (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\n\r\n(function (){\r\n\r\n\tangular.module('MeanAppYu')\r\n\t\t\t.controller('LoginController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running LoginController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\r\n\t\t\r\n\t\n(function (){\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t.controller('RegisterController', ['$scope', '$location', 'authentication', function($scope,$location,authentication){\r\n\t\t\tconsole.log('Running RegisterController');\r\n\r\n\t\t\tvar user={\r\n\t\t\t\tfirstName:\"\",\r\n\t\t\t\tlastName: \"\",\r\n\t\t\t\temail:\"\",\r\n\t\t\t\tpassword:\"\"\r\n\t\t\t};\r\n\r\n\t\t\t$scope.dataloading = false;\r\n\t\t\t$scope.user = user;\r\n\r\n\t\t\t$scope.register=function(){\r\n\t\t\t\tconsole.log(JSON.stringify(user));\r\n\t\t\t\t$scope.dataloading = true;\r\n\t\t\t\tauthentication.register(user)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tconsole.log(\"Registration Successful\");\r\n\t\t\t\t\t\t$location.path('/profile');\r\n\t\t\t\t\t})\r\n\t\t\t\t.error(function(err){\r\n\t\t\t\t\t\tconsole.log(\"Registraion failed: \"+ err.message);\r\n\t\t\t\t\t\talert(\"Registraion failed: \"+ err.message);\r\n\t\t\t\t\t\t$location.path(\"/register\");\r\n\t\t\t\t\t\t$scope.dataloading = false;\r\n\t\t\t\t});\t\t\r\n\t\t\t};\r\n\r\n\t\t}]);\r\n\r\n})();\r\n\r\n\t\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('FooterController', ['$scope', function($scope){\r\n\t\t\t\tconsole.log('Running FooterController');\r\n\t\t\t}]);\r\n\r\n})();\r\n\n(function () {\r\n\r\n\tangular.module('MeanAppYu')\t\t\r\n\t\t\t.controller('HeaderController', ['$scope', '$location', '$state', 'authentication', function($scope, $location, $state, authentication){\r\n\t\t\t\tconsole.log('Running HeaderController');\r\n\r\n\t\t\t\tuser = {\r\n\t\t\t\t\temail : \"\",\r\n\t\t\t\t\tpassword : \"\"\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.user = user;\r\n\r\n\t\t\t    $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n\t\t\t    $scope.currentUser = authentication.currentUser();\r\n\r\n\t\t\t    $scope.isLoggedIn = authentication.isLoggedIn();\r\n\r\n\t\t\t    console.log(\"logged in: \" + $scope.isLoggedIn);\r\n\t\t\t    \r\n\t\t\t    $scope.logout = function(){\r\n\t\t\t      authentication.logout();\r\n\t\t\t      if ($state.is('app')) {\r\n\t\t\t      \t$state.reload();\r\n\t\t\t      } else {\r\n\t\t\t      \t$location.path('/');\t\r\n\t\t\t      }\t\t\t      \r\n\t\t\t    };\r\n\r\n\t\t\t    // $scope.signIn = function(){\r\n\t\t\t    //   //$location.path('/login');\r\n\t\t\t    //   onSubmit();\r\n\t\t\t    // }\r\n\r\n\t\t\t    $scope.profile = function(){\r\n\t\t\t      $location.path('/profile');\r\n\t\t\t    };\r\n\r\n\t\t\t\t$scope.login = function () {\r\n\t\t\t\t\tauthentication\r\n\t\t\t\t\t.login(user)\t\t\t\t\t\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t$location.path('profile');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(err){\r\n\t\t\t\t\t\talert(err.message);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t}]);\r\n\r\n})();\r\n\n( function() {\r\nangular.module('MeanAppYu')\t\t\r\n\t\t.service('authentication', ['$http', '$window', '$location', function($http, $window, $location){\r\n\t\t\tconsole.log('Running authentication');\r\n\r\n\t\t\tvar saveToken = function (token) {\r\n\t\t\t\t$window.localStorage['mean-token'] = token;\r\n\t\t\t};\r\n\r\n\t\t\tvar getToken = function () {\r\n\t\t\t\treturn $window.localStorage['mean-token'];\r\n\t\t\t};\r\n\r\n\t\t\tvar isLoggedIn = function() {\r\n\t\t\t\tvar token = getToken();\r\n\t\t\t\tvar payload;\r\n\r\n\t\t\t\tif(token){\r\n\t\t\t\t\tpayload = token.split('.')[1]; // get second part of token\r\n\t\t\t\t\tpayload = $window.atob(payload);  // decode a base64 string\r\n\t\t\t\t\tpayload = JSON.parse(payload); // parse it as JSON\r\n\r\n\t\t\t\t\treturn payload.exp > Date.now() / 1000;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar currentUser = function() {\r\n\t\t\t\tif(isLoggedIn()){\r\n\t\t\t\t\tvar token = getToken();\r\n\t\t\t\t\tvar payload = token.split('.')[1];\r\n\t\t\t\t\tpayload = $window.atob(payload);\r\n\t\t\t\t\tpayload = JSON.parse(payload);\r\n\t\t\t\treturn {\r\n\t\t\t\t\temail : payload.email,\r\n\t\t\t\t\tname : payload.firstName\r\n\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tregister = function(user) {\r\n\t\t\t\tconsole.log(\"-------------Inside auth.service\")\r\n\t\t\t\treturn $http.post('/api/register', user).success(function(data){\r\n\t\t\t\t\tsaveToken(data.token);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogin = function(user) {\r\n\r\n\t\t\t\tconsole.log(\"------------before sending http to login, user:\" + JSON.stringify(user));\r\n\t\t\t\treturn $http.post('/api/login', user).success(function(data) {\r\n\t\t\t\t\tsaveToken(data.token);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tlogout = function() {\r\n\t\t\t\t$window.localStorage.removeItem('mean-token');\t\t\t\r\n\t\t\t}; \r\n\r\n\t\t\treturn {\r\n\t\t\t\tcurrentUser : currentUser,\r\n\t\t\t\tsaveToken : saveToken,\r\n\t\t\t\tgetToken : getToken,\r\n\t\t\t\tisLoggedIn : isLoggedIn,\r\n\t\t\t\tregister : register,\r\n\t\t\t\tlogin : login,\r\n\t\t\t\tlogout : logout\r\n\t\t\t};\r\n\r\n\t\r\n\r\n\t\t}]);\r\n\r\n})();\n(function() {\r\n\r\n  angular\r\n    .module('MeanAppYu')\r\n    .service('meanData', ['$http', 'authentication', function($http, authentication) {\r\n\r\n\t    // pass token to API /api/profile, server expects JWT in the header \r\n\t    // on the request called Authorization\r\n\t    var getProfile = function () {\r\n\t      return $http.get('/api/profile', {\r\n\t        // Bearer is http token based strategy\r\n\t        headers: {\r\n\t          Authorization: 'Bearer '+ authentication.getToken()\r\n\t        }\r\n\t      });\r\n\t    };\r\n\r\n\t    return {\r\n\t      getProfile : getProfile\r\n\t  \t};\r\n    }]);\r\n})();"],"sourceRoot":"/source/"}