!function(){function e(e,o){e.state("app",{url:"/",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"home/home.view.html",controller:"HomeController"},footer:{templateUrl:"common/footer/footer.view.html",controller:"FooterController"}}}).state("app.aboutus",{url:"aboutus",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"aboutus/aboutus.view.html",controller:"AboutUsController"}}}).state("app.login",{url:"login",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"auth/login/login.view.html",controller:"LoginController"}}}).state("app.register",{url:"register",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"auth/register/register.view.html",controller:"RegisterController"}}}).state("app.profile",{url:"profile",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"profile/profile.view.html",controller:"ProfileController"}}}),o.otherwise("/")}angular.module("MeanAppYu",["ui.router"]),angular.module("MeanAppYu").config(["$stateProvider","$urlRouterProvider",e])}(),function(){angular.module("MeanAppYu").controller("AboutUsController",["$scope",function(e){console.log("Running AboutusController")}])}(),function(){angular.module("MeanAppYu").controller("HomeController",["$scope",function(e){console.log("Running HomeController")}])}(),function(){angular.module("MeanAppYu").controller("ProfileController",["$scope","meanData",function(e,o){console.log("Running ProfileController"),o.getProfile().success(function(o){e.user=o,console.log(o)}).error(function(e){console.log(e)})}])}(),function(){angular.module("MeanAppYu").controller("LoginController",["$scope",function(e){console.log("Running LoginController")}])}(),function(){angular.module("MeanAppYu").controller("FooterController",["$scope",function(e){console.log("Running FooterController")}])}(),function(){angular.module("MeanAppYu").controller("RegisterController",["$scope","$location","authentication",function(e,o,n){console.log("Running RegisterController");var r={firstName:"",lastName:"",email:"",password:""};e.dataloading=!1,e.user=r,e.register=function(){console.log(JSON.stringify(r)),e.dataloading=!0,n.register(r).success(function(e){console.log("Registration Successful"),o.path("/profile")}).error(function(n){console.log("Registraion failed: "+n.message),alert("Registraion failed: "+n.message),o.path("/register"),e.dataloading=!1})}}])}(),function(){angular.module("MeanAppYu").controller("HeaderController",["$scope","$location","$state","authentication",function(e,o,n,r){console.log("Running HeaderController"),user={email:"",password:""},e.user=user,e.isLoggedIn=r.isLoggedIn(),e.currentUser=r.currentUser(),e.facebookSignin=function(){r.facebookLogin().success(function(e){console.log("Header controller, Login Successful"),o.path("/profile")}).error(function(e){console.log("Header controller, Login failed: "+e),alert("Header controller, Login failed: "+e),o.path("/login")})},console.log("logged in: "+e.isLoggedIn),e.logout=function(){r.logout(),n.is("app")?n.reload():o.path("/")},e.profile=function(){o.path("/profile")},e.login=function(){r.login(user).success(function(){o.path("profile")}).error(function(e){alert(e.message)})}}])}(),function(){angular.module("MeanAppYu").service("authentication",["$http","$window","$location",function(e,o,n){console.log("Running authentication");var r=function(e){o.localStorage["mean-token"]=e},t=function(){return o.localStorage["mean-token"]},l=function(){var e,n=t();return!!n&&(e=n.split(".")[1],e=o.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},i=function(){if(l()){var e=t(),n=e.split(".")[1];return n=o.atob(n),n=JSON.parse(n),{email:n.email,name:n.firstName}}};register=function(o){return console.log("-------------Inside auth.service"),e.post("/api/register",o).success(function(e){r(e.token)})},login=function(o){return console.log("------------before sending http to login, user:"+JSON.stringify(o)),e.post("/api/login",o).success(function(e){r(e.token)})},logout=function(){o.localStorage.removeItem("mean-token")};var a=function(){return console.log("------------sending request to server to go to facebook"),e.get("/api/facebook").success(function(e){r(e.token)})};return{currentUser:i,saveToken:r,getToken:t,isLoggedIn:l,register:register,login:login,logout:logout,facebookLogin:a}}])}(),function(){angular.module("MeanAppYu").service("meanData",["$http","authentication",function(e,o){var n=function(){return e.get("/api/profile",{headers:{Authorization:"Bearer "+o.getToken()}})};return{getProfile:n}}])}();
//# sourceMappingURL=app.min.js.map
