!function(){function e(e,o){e.state("app",{url:"/",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"home/home.view.html",controller:"HomeController"},footer:{templateUrl:"common/footer/footer.view.html",controller:"FooterController"}}}).state("app.product1",{url:"product1",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@app":{templateUrl:"products/product1.html",controller:"HomeController"}}}).state("app.product1.model1",{url:"model1",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@app.product1":{templateUrl:"products/product1model1.html",controller:"HomeController"}}}).state("app.product2",{url:"product2",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@app":{templateUrl:"products/product2.html",controller:"HomeController"}}}).state("app.product2.model1",{url:"model1",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@app.product2":{templateUrl:"products/product2model1.html",controller:"HomeController"}}}).state("app.aboutus",{url:"aboutus",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"aboutus/aboutus.view.html",controller:"AboutUsController"}}}).state("app.login",{url:"login",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"auth/login/login.view.html",controller:"LoginController"}}}).state("app.register",{url:"register",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"auth/register/register.view.html",controller:"RegisterController"}}}).state("app.profile",{url:"profile",views:{"header@":{templateUrl:"common/header/header.view.html",controller:"HeaderController"},"content@":{templateUrl:"profile/profile.view.html",controller:"ProfileController"}}}),o.otherwise("/")}angular.module("MeanAppYu",["ui.router"]),angular.module("MeanAppYu").config(["$stateProvider","$urlRouterProvider",e])}(),function(){angular.module("MeanAppYu").controller("AboutUsController",["$scope",function(e){console.log("Running AboutusController")}])}(),function(){angular.module("MeanAppYu").controller("HomeController",["$scope",function(e){console.log("Running HomeController"),e.models=[{name:"model1",spec1:"spec1",spec2:"spec2"},{name:"model2",spec1:"spec1",spec2:"spec2"}]}])}(),function(){angular.module("MeanAppYu").controller("ProfileController",["$scope","meanData",function(e,o){console.log("Running ProfileController"),o.getProfile().success(function(o){e.user=o,console.log(o)}).error(function(e){console.log(e)})}])}(),function(){angular.module("MeanAppYu").controller("LoginController",["$scope",function(e){console.log("Running LoginController")}])}(),function(){angular.module("MeanAppYu").controller("RegisterController",["$scope","$location","authentication",function(e,o,r){console.log("Running RegisterController");var t={firstName:"",lastName:"",email:"",password:""};e.dataloading=!1,e.user=t,e.register=function(){console.log(JSON.stringify(t)),e.dataloading=!0,r.register(t).success(function(e){console.log("Registration Successful"),o.path("/profile")}).error(function(r){console.log("Registraion failed: "+r.message),alert("Registraion failed: "+r.message),o.path("/register"),e.dataloading=!1})}}])}(),function(){angular.module("MeanAppYu").controller("FooterController",["$scope",function(e){console.log("Running FooterController")}])}(),function(){angular.module("MeanAppYu").controller("HeaderController",["$scope","$location","$state","authentication",function(e,o,r,t){console.log("Running HeaderController"),user={email:"",password:""},e.user=user,e.isLoggedIn=t.isLoggedIn(),e.currentUser=t.currentUser(),e.facebookSignin=function(){t.facebookLogin().success(function(e){console.log("Header controller, Login Successful"),o.path("/profile")}).error(function(e){console.log("Header controller, Login failed: "+e),alert("Header controller, Login failed: "+e),o.path("/login")})},console.log("logged in: "+e.isLoggedIn),e.logout=function(){t.logout(),r.is("app")?r.reload():o.path("/")},e.profile=function(){o.path("/profile")},e.login=function(){t.login(user).success(function(){o.path("profile")}).error(function(e){alert(e.message)})}}])}(),function(){angular.module("MeanAppYu").service("authentication",["$http","$window","$location",function(e,o,r){console.log("Running authentication");var t=function(e){o.localStorage["mean-token"]=e},n=function(){return o.localStorage["mean-token"]},l=function(){var e,r=n();return!!r&&(e=r.split(".")[1],e=o.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},a=function(){if(l()){var e=n(),r=e.split(".")[1];return r=o.atob(r),r=JSON.parse(r),{email:r.email,name:r.firstName}}};register=function(o){return console.log("-------------Inside auth.service"),e.post("/api/register",o).success(function(e){t(e.token)})},login=function(o){return console.log("------------before sending http to login, user:"+JSON.stringify(o)),e.post("/api/login",o).success(function(e){t(e.token)})},logout=function(){o.localStorage.removeItem("mean-token")};var i=function(){return console.log("------------sending request to server to go to facebook"),e.get("/api/facebook").success(function(e){t(e.token)})};return{currentUser:a,saveToken:t,getToken:n,isLoggedIn:l,register:register,login:login,logout:logout,facebookLogin:i}}])}(),function(){angular.module("MeanAppYu").service("meanData",["$http","authentication",function(e,o){var r=function(){return e.get("/api/profile",{headers:{Authorization:"Bearer "+o.getToken()}})};return{getProfile:r}}])}();
//# sourceMappingURL=app.min.js.map
